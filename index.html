<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Yi Guo</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DY9Q6EHT23"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-DY9Q6EHT23');
  </script>
  <style>
    :root {
      --master: #f59e0b;
      --gads: #8b5cf6;
      --gws: #3b82f6;
      --sub: #ec4899;
      --merge: #10b981;

      --master-color: #f59e0b;
      --gads-color: #8b5cf6;
      --gws-color: #3b82f6;
      --merge-color: #10b981;
      --research-color: #f97316;

      --bg-primary: #fafbfc;
      --bg-secondary: #ffffff;
      --text-primary: #222222;
      --text-secondary: #666666;
      --accent-color: #1A2A80;
      --accent-light: #7A85C1;
      --highlight-bg: #f3f7fa;
      --border-color: #f0f0f0;
      --divider-color: #f7f7f7;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --nav-hover-bg: #f3f3f3;
      --transition-duration: 0.4s;
      --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] {
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --text-primary: #e6edf3;
      --text-secondary: #8b949e;
      --accent-color: #a8c0ff;
      --accent-light: #7b8cde;
      --highlight-bg: #1f2937;
      --border-color: #30363d;
      --divider-color: #21262d;
      --shadow-color: rgba(0, 0, 0, 0.3);
      --nav-hover-bg: #21262d;
    }

    * {
      box-sizing: border-box;
    }

    body, body *, body *::before, body *::after {
      transition: background-color var(--transition-duration) var(--transition-timing),
                  color var(--transition-duration) var(--transition-timing),
                  border-color var(--transition-duration) var(--transition-timing),
                  box-shadow var(--transition-duration) var(--transition-timing);
    }

    html {
      font-size: 16px;
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .main {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 32px 16px;
      width: 100%;
      max-width: 100%;
    }

    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 16px;
      object-fit: cover;
      margin-bottom: 20px;
      box-shadow: 0 2px 16px var(--shadow-color);
    }

    .name {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 10px;
      text-align: center;
      padding: 0 8px;
    }

    .title {
      font-size: 1.15rem;
      color: var(--accent-light);
      margin-bottom: 6px;
      font-weight: 500;
      text-align: center;
      padding: 0 8px;
    }

    .title:last-of-type {
      margin-bottom: 28px;
    }

    .nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 14px;
      margin-bottom: 28px;
      padding: 0 8px;
      width: 100%;
    }

    .nav a {
      color: var(--text-primary);
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      font-size: 1.05rem;
      font-weight: 500;
      text-align: center;
    }

    .nav a.external:after {
      content: 'â†—';
      font-size: 0.8em;
      margin-left: 4px;
      color: var(--text-secondary);
    }

    .nav a.active {
      border: 2px solid var(--text-primary);
      background: var(--bg-secondary);
      font-weight: 700;
      box-shadow: 0 2px 8px var(--shadow-color);
    }

    .nav a:hover {
      background: var(--nav-hover-bg);
      color: var(--accent-color);
    }

    .theme-toggle {
      position: fixed;
      top: 12px;
      right: 12px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: 0 2px 12px var(--shadow-color);
      z-index: 1000;
      flex-shrink: 0;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    .theme-toggle .sun, .theme-toggle .moon {
      position: absolute;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    [data-theme="dark"] .theme-toggle .sun {
      opacity: 1;
      transform: scale(1);
    }

    [data-theme="dark"] .theme-toggle .moon {
      opacity: 0;
      transform: scale(0.5);
    }

    .theme-toggle .sun {
      opacity: 0;
      transform: scale(0.5);
    }

    .theme-toggle .moon {
      opacity: 1;
      transform: scale(1);
    }

    .panel {
      display: none;
      width: 100%;
      max-width: 900px;
      margin: 0 auto 24px auto;
      background: var(--bg-secondary);
      border-radius: 16px;
      box-shadow: 0 4px 24px var(--shadow-color);
      color: var(--text-primary);
      font-size: 1rem;
      padding: 24px 20px;
      border: 1px solid var(--border-color);
      overflow: visible;
    }

    .panel.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .panel h2 {
      color: var(--accent-color);
      font-size: 1.1rem;
      margin: 0 0 16px 0;
      font-weight: 600;
    }

    .panel .desc {
      color: var(--text-secondary);
      font-size: 0.95rem;
      margin-bottom: 12px;
      line-height: 1.7;
    }

    .panel a {
      color: var(--accent-color);
      word-break: break-all;
    }

    .panel hr, .panel > div[style*="height:1px"] {
      background: var(--divider-color);
      border: none;
      height: 1px;
      margin: 16px 0;
    }

    /* Career Graph */
    .career-graph-wrapper {
      position: relative;
      width: 100%;
      overflow-x: auto;
      overflow-y: visible;
    }

    /* Overlay SVG for continuous lines */
    .graph-svg-overlay {
      position: absolute;
      left: 0;
      width: 80px;
      pointer-events: none;
      z-index: 1;
      overflow: visible;
    }

    /* å›ºå®šè¡Œé«˜ç¡®ä¿çº¿æ¡å¯¹é½ */
    .git-row { height: 50px; }

    .git-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
      position: relative;
    }

    .git-table tbody tr {
      height: 50px;
    }

    .git-table thead {
      background: var(--highlight-bg);
    }

    .git-table th {
      padding: 10px 8px;
      text-align: left;
      font-weight: 600;
      font-size: 0.8rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      border-bottom: 1px solid var(--border-color);
    }

    .git-table td {
      padding: 0;
      vertical-align: middle;
      border-bottom: 1px solid var(--border-color);
    }

    .git-table tbody tr:hover {
      background: var(--highlight-bg);
    }

    /* åˆ—å®½ */
    .col-graph { width: 80px; min-width: 80px; padding: 0 !important; position: relative; }
    .col-graph svg { display: block; width: 80px; height: 50px; position: relative; z-index: 2; }
    .col-desc { width: 35%; padding: 10px 12px !important; }
    .col-date { width: 90px; min-width: 90px; padding: 10px 8px !important; color: var(--text-secondary); font-size: 0.85rem; white-space: nowrap; }
    .col-ach { width: 30%; padding: 10px 8px !important; font-size: 0.85rem; color: var(--text-secondary); }

    /* çº¿æ¡ */
    .gline { stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; fill: none; }
    .gline-master { stroke: var(--master-color); }
    .gline-gads { stroke: var(--gads-color); }
    .gline-gws { stroke: var(--gws-color); }
    .gline-project { stroke: var(--sub); stroke-width: 2; }
    .gline-research { stroke: var(--research-color); stroke-width: 2; }

    /* èŠ‚ç‚¹ */
    .gnode { stroke-width: 2; fill: var(--bg-secondary); }
    .gnode-master { stroke: var(--master-color); }
    .gnode-master.filled { fill: var(--master-color); }
    .gnode-gads { stroke: var(--gads-color); }
    .gnode-gads.filled { fill: var(--gads-color); }
    .gnode-gws { stroke: var(--gws-color); }
    .gnode-gws.filled { fill: var(--gws-color); }
    .gnode-project { stroke: var(--sub); }
    .gnode-merge { stroke: var(--merge-color); }
    .gnode-merge.filled { fill: var(--merge-color); }
    .gnode-research { stroke: var(--research-color); }
    .gnode-research.filled { fill: var(--research-color); }

    /* æ ‡ç­¾ */
    .tag {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: 4px;
      border: 1px solid;
      margin-right: 6px;
      vertical-align: middle;
    }
    .tag-master { background: rgba(245,158,11,0.12); color: var(--master-color); border-color: var(--master-color); }
    .tag-gads { background: rgba(139,92,246,0.12); color: var(--gads-color); border-color: var(--gads-color); }
    .tag-gws { background: rgba(59,130,246,0.12); color: var(--gws-color); border-color: var(--gws-color); }
    .tag-project { background: rgba(236,72,153,0.12); color: #ec4899; border-color: #ec4899; }
    .tag-merge { background: rgba(16,185,129,0.12); color: var(--merge-color); border-color: var(--merge-color); }
    .tag-research { background: rgba(249,115,22,0.12); color: var(--research-color); border-color: var(--research-color); }
    .tag-head { background: #ffc107; color: #000; border-color: #ffc107; }

    .desc-tag { margin-bottom: 4px; }
    .desc-title { font-weight: 600; font-size: 1rem; margin-bottom: 2px; }
    .desc-text { margin-bottom: 2px; }
    .sub { font-size: 0.8rem; color: var(--text-secondary); margin-top: 2px; }
    .ach {
      display: inline-block;
      font-size: 0.75rem;
      color: var(--merge-color);
      background: rgba(16,185,129,0.1);
      padding: 2px 6px;
      border-radius: 8px;
    }
    .ach::before { content: 'âœ“ '; font-weight: bold; }

    /* Dark mode */
    [data-theme="dark"] .tag-master { background: rgba(240,160,44,0.15); color: #f0a02c; border-color: #f0a02c; }
    [data-theme="dark"] .tag-gads { background: rgba(163,113,247,0.15); color: #a371f7; border-color: #a371f7; }
    [data-theme="dark"] .tag-gws { background: rgba(88,166,255,0.15); color: #58a6ff; border-color: #58a6ff; }
    [data-theme="dark"] .gline-master { stroke: #f0a02c; }
    [data-theme="dark"] .gline-gads { stroke: #a371f7; }
    [data-theme="dark"] .gline-gws { stroke: #58a6ff; }
    [data-theme="dark"] .gline-project { stroke: #bc8cff; }
    [data-theme="dark"] .gnode-master { stroke: #f0a02c; }
    [data-theme="dark"] .gnode-master.filled { fill: #f0a02c; }
    [data-theme="dark"] .gnode-gads { stroke: #a371f7; }
    [data-theme="dark"] .gnode-gads.filled { fill: #a371f7; }
    [data-theme="dark"] .gnode-gws { stroke: #58a6ff; }
    [data-theme="dark"] .gnode-gws.filled { fill: #58a6ff; }
    [data-theme="dark"] .gnode-project { stroke: #bc8cff; }
    [data-theme="dark"] .gnode-merge.filled { fill: var(--merge-color); }

    /* Mobile */
    @media (max-width: 500px) {
      .col-ach { display: none; }
      .col-date { width: 70px; font-size: 0.65rem; }
    }

    /* Me Panel Styles */
    .me-hero {
      text-align: center;
      padding: 20px 0 24px;
      border-bottom: 1px solid var(--divider-color);
      margin-bottom: 20px;
    }
    .me-hero-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    .me-hero-subtitle {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    .me-hero-subtitle strong {
      color: var(--accent-color);
      background: linear-gradient(120deg, rgba(59,130,246,0.15) 0%, rgba(139,92,246,0.15) 100%);
      padding: 2px 8px;
      border-radius: 4px;
    }

    .me-cards {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }
    @media (max-width: 600px) {
      .me-cards { grid-template-columns: 1fr; }
    }

    .me-card {
      background: var(--highlight-bg);
      border-radius: 12px;
      padding: 16px;
      border: 1px solid var(--border-color);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .me-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--shadow-color);
    }
    .me-card-icon {
      width: 28px;
      height: 28px;
      margin-bottom: 10px;
      color: var(--accent-color);
    }
    .me-card-icon svg {
      width: 100%;
      height: 100%;
      stroke: currentColor;
      stroke-width: 1.5;
      fill: none;
    }
    .me-card-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
    }
    .me-card-desc {
      font-size: 0.8rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }
    .me-card-desc a {
      color: var(--accent-color);
      text-decoration: none;
    }
    .me-card-desc a:hover {
      text-decoration: underline;
    }

    .me-skills {
      margin-bottom: 20px;
    }
    .me-skills-title {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      margin-bottom: 10px;
      letter-spacing: 0.5px;
    }
    .me-skill-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .me-skill-tag {
      font-size: 0.75rem;
      padding: 5px 12px;
      border-radius: 20px;
      background: var(--highlight-bg);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      font-weight: 500;
    }
    .me-skill-tag.highlight {
      background: linear-gradient(135deg, rgba(59,130,246,0.12) 0%, rgba(139,92,246,0.12) 100%);
      border-color: var(--accent-light);
      color: var(--accent-color);
    }

    .me-contact {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 16px;
      background: var(--highlight-bg);
      border-radius: 12px;
      border: 1px solid var(--border-color);
    }
    .me-contact-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    .me-contact-item svg {
      flex-shrink: 0;
    }

    /* Typewriter Effect */
    .typewriter {
      font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
      overflow: hidden;
      white-space: nowrap;
      border-right: 2px solid var(--accent-color);
      animation: blink-caret 0.75s step-end infinite;
    }
    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: var(--accent-color); }
    }
</style>
</head>
<body>
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
    <span class="sun">â˜€ï¸</span>
    <span class="moon">ğŸŒ™</span>
  </button>

  <div class="main">
    <img src="images/IMG_1532.JPG" alt="Yi Guo" class="avatar">
    <div class="name">Yi Guo</div>
    <div class="title">Senior Machine Learning Scientist, Paypal</div>
    <div class="title">Researcher, PhD in AI+Data</div>
    <nav class="nav">
      <a id="me-link">Me</a>
      <a id="career-link">Career</a>
      <a href="https://scholar.google.com/citations?user=9fDFvb8AAAAJ&hl" target="_blank" class="external">Google Scholar</a>
      <a href="https://www.linkedin.com/in/%E7%86%A0-%E9%83%AD-394329194/?locale=en_US" target="_blank" class="external">LinkedIn</a>
    </nav>

    <div class="panel" id="panel-me">
      <!-- Hero Section -->
      <div class="me-hero">
        <div class="me-hero-title">Building the Future of AI-Powered Intelligence</div>
        <div class="me-hero-subtitle">
          Passionate about <strong>Agentic AI</strong> and how autonomous agents can revolutionize business intelligence and software development.
        </div>
      </div>

      <!-- Experience Cards -->
      <div class="me-cards">
        <div class="me-card">
          <div class="me-card-icon">
            <svg viewBox="0 0 24 24"><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
          </div>
          <div class="me-card-title">PayPal</div>
          <div class="me-card-desc">Senior Machine Learning Scientist</div>
        </div>
        <div class="me-card">
          <div class="me-card-icon">
            <svg viewBox="0 0 24 24"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
          </div>
          <div class="me-card-title">Ph.D. Computer Science</div>
          <div class="me-card-desc"><a href="https://idvxlab.com/" target="_blank">iDVX Lab</a>, Tongji University<br>Advisor: <a href="https://nancao.org/" target="_blank">Prof. Nan Cao</a></div>
        </div>
      </div>

      <!-- Skills Section -->
      <div class="me-skills">
        <div class="me-skills-title">Research Interests</div>
        <div class="me-skill-tags">
          <span class="me-skill-tag highlight">Agentic AI</span>
          <span class="me-skill-tag highlight">LLM Agents</span>
          <span class="me-skill-tag">AI + Data</span>
          <span class="me-skill-tag">Business Intelligence</span>
          <span class="me-skill-tag">Data Visualization</span>
          <span class="me-skill-tag">Multi-Agent Systems</span>
        </div>
      </div>

      <!-- Contact -->
      <div class="me-contact">
        <div class="me-contact-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-10 6L2 7"/></svg>
          <span class="typewriter" id="email-typewriter"></span>
        </div>
      </div>
    </div>

    <div class="panel" id="panel-career">
      <div class="career-graph-wrapper">
<!-- SVG ç”± JS è‡ªåŠ¨ç”Ÿæˆ -->
        <svg class="graph-svg-overlay" id="career-graph-svg"></svg>

        <table class="git-table">
          <thead>
            <tr>
              <th class="col-graph">Graph</th>
              <th class="col-desc">Description</th>
              <th class="col-date">Date</th>
              <th class="col-ach">Achievement</th>
            </tr>
          </thead>
          <tbody>
        <!-- è¡¨æ ¼å†…å®¹ç”± JS è‡ªåŠ¨ç”Ÿæˆ -->
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <script>
    // Typewriter effect for email
    (function() {
      var email = 'yii.guo@gmail.com';
      var el = document.getElementById('email-typewriter');
      var i = 0;
      var started = false;

      function type() {
        if (i < email.length) {
          el.textContent += email.charAt(i);
          i++;
          setTimeout(type, 80 + Math.random() * 40);
        }
      }

      // Start typing when Me panel becomes visible
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting && !started) {
            started = true;
            setTimeout(type, 300);
          }
        });
      });

      if (el) {
        observer.observe(el);
      }
    })();

    // Theme toggle
    (function() {
      var themeToggle = document.getElementById('themeToggle');
      var html = document.documentElement;
      var savedTheme = localStorage.getItem('theme');
      var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        html.setAttribute('data-theme', 'dark');
      } else {
        html.setAttribute('data-theme', 'light');
      }
      
      themeToggle.addEventListener('click', function() {
        var currentTheme = html.getAttribute('data-theme');
        var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });
      
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        if (!localStorage.getItem('theme')) {
          html.setAttribute('data-theme', e.matches ? 'dark' : 'light');
        }
      });
    })();

    // Navigation
    (function() {
      var navLinks = document.querySelectorAll('.nav a');
      var panels = {
        'me-link': document.getElementById('panel-me'),
        'career-link': document.getElementById('panel-career')
      };

      navLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
          if (link.classList.contains('external')) return;
          e.preventDefault();
          navLinks.forEach(function(l) {
            l.classList.remove('active');
          });
          link.classList.add('active');
          Object.keys(panels).forEach(function(key) {
            panels[key].classList.remove('active');
          });
          if (panels[link.id]) {
            panels[link.id].classList.add('active');
            // ç‚¹å‡» Career æ—¶é‡æ–°æ¸²æŸ“ SVG
            if (link.id === 'career-link' && typeof window.renderCareerSVG === 'function') {
              requestAnimationFrame(function() {
                requestAnimationFrame(function() {
                  window.renderCareerSVG();
                });
              });
            }
          }
        });
      });

      document.body.addEventListener('click', function(e) {
        var nav = document.querySelector('.nav');
        var isNav = nav.contains(e.target);
        var panelKeys = Object.keys(panels);
        var isPanel = panelKeys.some(function(key) {
          return panels[key] && panels[key].contains(e.target);
        });
        if (!isNav && !isPanel) {
          navLinks.forEach(function(l) {
            l.classList.remove('active');
          });
          panelKeys.forEach(function(key) {
            panels[key].classList.remove('active');
          });
        }
      });
    })();

    // Career Git Graph - è‡ªåŠ¨ç”Ÿæˆ SVG å’Œè¡¨æ ¼
    (function() {
      // ========== æ•°æ®å®šä¹‰ ==========
      // åªéœ€ä¿®æ”¹è¿™ä¸ªæ•°ç»„å³å¯æ·»åŠ æ–°çš„ career é¡¹ç›®
      // branch: å½“å‰æ‰€åœ¨åˆ†æ”¯ (master/gads/gws/project-xxx)
      // type: commit/checkout/merge/fork
      // æ·»åŠ æ–°é¡¹ç›®æ—¶ï¼Œåªéœ€è¦åœ¨æ•°ç»„å¼€å¤´æ’å…¥æ–°å¯¹è±¡
      var careerData = [
        { branch: 'gws', type: 'head', tag: 'chapter/gws', tagType: 'gws', desc: 'working...', date: 'Now', ach: '-', headTag: true },
        { branch: 'gws', type: 'merge', tag: 'chapter/gws', tagType: 'gws', desc: 'merge research/data_agent_knowledge', sub: 'Research paper completed', date: 'Feb 2026', ach: '-', merges: ['research'] },
        { branch: 'research', type: 'project', tag: 'research/data_agent_knowledge', tagType: 'research', title: 'What Business Knowledge Matters?', desc: 'A Taxonomy and Empirical Study for Data Agents', date: 'Dec 2025-Feb 2026', ach: 'Submit to ACL 2026 Industry track' },
        { branch: 'chatbi', type: 'ongoing', tag: 'project/chatbi', tagType: 'project', title: 'ChatBI', desc: 'Natural language data analysis & visualization', date: 'Sep 2025-Now', ach: 'Production, daily active users, leadership adoption' },
        { branch: 'bda', type: 'ongoing', tag: 'project/agentic-bda', tagType: 'project', title: 'Agentic Business Data Analysis', desc: 'Alert checking & reasoning', date: 'Oct 2025-Now', ach: 'Leadership demo, high priority' },
        { branch: 'gws', type: 'merge', tag: 'chapter/gws', tagType: 'gws', desc: 'merge web-agent, fork chatbi, bda, research', sub: 'Web Agent completed', date: 'Dec 2025', ach: 'Delivered to multiple biz teams', forks: ['chatbi', 'bda', 'research'], merges: ['webagent'] },
        { branch: 'webagent', type: 'project', tag: 'project/web-agent', tagType: 'project', title: 'Web Agent', desc: 'Agent-based web content crawling', date: 'Oct-Dec 2025', ach: '-' },
        { branch: 'gws', type: 'merge', tag: 'chapter/gws', tagType: 'gws', desc: 'merge agentic-qe, fork web-agent', sub: 'Agentic QE completed', date: 'Sep 2025', ach: '50% efficiency, 100+ cases/day, adopted org-wide', forks: ['webagent'], merges: ['qe'] },
        { branch: 'qe', type: 'project', tag: 'project/agentic-qe', tagType: 'project', title: 'Agentic QE', desc: 'Multi-agent E2E testing automation', date: 'May-Sep 2025', ach: '-' },
        { branch: 'gws', type: 'init', tag: 'chapter/gws', tagType: 'gws', desc: 'init: start gws, fork agentic-qe', sub: 'GWS AI Team | Horizontal AI projects', date: 'May 2025', ach: '-', forks: ['qe'] },
        { branch: 'master', type: 'checkout', tag: 'master', tagType: 'master', desc: 'checkout -b chapter/gws', sub: 'Joined PayPal China & GWS Team', date: 'May 2025', ach: '-', newBranch: 'gws' },
        { branch: 'master', type: 'merge', tag: 'merge', tagType: 'merge', desc: 'chapter/gads â†’ master', sub: 'GADS chapter completed', date: 'Apr 2025', ach: '-', merges: ['gads'] },
        { branch: 'gads', type: 'merge', tag: 'chapter/gads', tagType: 'gads', desc: 'merge project/agentic-ds', sub: 'Agentic Data Scientist completed', date: 'Apr 2025', ach: 'Demo to AI Head & CTO', merges: ['ds'] },
        { branch: 'ds', type: 'project', tag: 'project/agentic-ds', tagType: 'project', title: 'Agentic Data Scientist', desc: 'Multi-agent transaction analysis for risk analysis', date: 'Feb-Apr 2025', ach: '-' },
        { branch: 'gads', type: 'init', tag: 'chapter/gads', tagType: 'gads', desc: 'init: start gads, fork agentic-ds', sub: 'RADAR Team | Horizontal AI projects', date: 'Feb 2025', ach: '-', forks: ['ds'] },
        { branch: 'master', type: 'checkout', tag: 'master', tagType: 'master', desc: 'checkout -b chapter/gads', sub: 'Started GADS chapter', date: 'Feb 2025', ach: '-', newBranch: 'gads' },
        { branch: 'master', type: 'init', tag: 'master', tagType: 'master', desc: 'init: join paypal', sub: 'Career @ PayPal begins', date: 'Feb 2025', ach: '-' },
        { branch: 'master', type: 'commit', tag: 'master', tagType: 'master', desc: 'close: seed, bytedance', sub: 'Great journey, great team.', date: 'Jan 2025', ach: '-' }
      ];

      // ========== åˆ†æ”¯é…ç½® ==========
      var branchConfig = {
        master: { x: 15, color: 'master' },
        gads: { x: 35, color: 'gads' },
        gws: { x: 35, color: 'gws' },
        ds: { x: 55, color: 'project' },
        qe: { x: 55, color: 'project' },
        webagent: { x: 45, color: 'project' },
        chatbi: { x: 55, color: 'project' },
        bda: { x: 65, color: 'project' },
        research: { x: 75, color: 'research' }
      };

      var ROW_HEIGHT = 50;
      var HEADER_OFFSET = 33;

      // ========== ç”Ÿæˆè¡¨æ ¼ ==========
      function renderTable() {
        var tbody = document.querySelector('.git-table tbody');
        var html = '';
        careerData.forEach(function(item) {
          var achHtml = item.ach === '-' ? '-' : '<span class="ach">' + item.ach + '</span>';
          var descHtml = '<div class="desc-tag"><span class="tag tag-' + item.tagType + '">' + item.tag + '</span>';
          if (item.headTag) descHtml += '<span class="tag tag-head">HEAD</span>';
          descHtml += '</div>';
          if (item.title) {
            descHtml += '<div class="desc-title">' + item.title + '</div><div class="sub">' + item.desc + '</div>';
          } else {
            descHtml += '<div class="desc-text">' + item.desc + '</div>';
            if (item.sub) descHtml += '<div class="sub">' + item.sub + '</div>';
          }
          html += '<tr class="git-row"><td class="col-graph"></td><td class="col-desc">' + descHtml + '</td><td class="col-date">' + item.date + '</td><td class="col-ach">' + achHtml + '</td></tr>';
        });
        tbody.innerHTML = html;
      }

      // ========== ç”Ÿæˆ SVG ==========
      window.renderCareerSVG = function renderSVG() {
        var svg = document.getElementById('career-graph-svg');
        // åŠ¨æ€è·å–è¡¨å¤´å’Œtbodyä½ç½®
        var thead = document.querySelector('.git-table thead');
        var tbody = document.querySelector('.git-table tbody');

        if (!tbody) return;

        var tbodyRect = tbody.getBoundingClientRect();
        var theadRect = thead ? thead.getBoundingClientRect() : null;
        var wrapperRect = document.querySelector('.career-graph-wrapper').getBoundingClientRect();

        // è®¡ç®— SVG ç›¸å¯¹äº wrapper çš„ top åç§»
        var svgTop = tbodyRect.top - wrapperRect.top;
        var tbodyHeight = tbodyRect.height;

        // è·å–æ¯è¡Œçš„å®é™…ä½ç½®ï¼ˆç›¸å¯¹äº tbodyï¼‰
        var rows = tbody.querySelectorAll('tr');
        var rowCenters = [];
        for (var i = 0; i < rows.length; i++) {
          var rowRect = rows[i].getBoundingClientRect();
          // è®¡ç®—è¡Œä¸­å¿ƒç‚¹ç›¸å¯¹äº tbody é¡¶éƒ¨çš„ä½ç½®
          var centerY = rowRect.top - tbodyRect.top + rowRect.height / 2;
          rowCenters.push(centerY);
        }

        svg.setAttribute('viewBox', '0 0 80 ' + tbodyHeight);
        svg.setAttribute('preserveAspectRatio', 'none');
        svg.style.top = svgTop + 'px';
        svg.style.height = tbodyHeight + 'px';

        var paths = [];
        var nodes = [];

        // åœ†è§’åŠå¾„
        var R = 8;

        // è®¡ç®—æ¯è¡Œçš„ y åæ ‡ (ä¸­å¿ƒç‚¹) - åŸºäºå®é™…è¡Œä½ç½®
        function rowY(index) {
          if (index < rowCenters.length) {
            return rowCenters[index];
          }
          return index * ROW_HEIGHT + ROW_HEIGHT / 2;
        }

        // ç”Ÿæˆå¸¦åœ†è§’çš„è·¯å¾„ï¼šä»(x1,y1)åˆ°(x2,y2)ï¼Œå¸¦æœ‰åœ†è§’è½¬å¼¯
        // direction: 'fork-up' = ä»å·¦å‘å³ç„¶åå‘ä¸Š, 'merge-up' = ä»å³å‘å·¦ç„¶åå‘ä¸Š
        function roundedCornerPath(x1, y1, x2, y2, direction) {
          var r = R;
          if (direction === 'fork-up') {
            // ä»å·¦è¾¹å¼€å§‹ï¼Œå‘å³èµ°ï¼Œç„¶åå‘ä¸Š
            // èµ·ç‚¹(x1,y1)ï¼Œç»ˆç‚¹(x2,y2)ï¼Œx2>x1, y2<y1
            return 'M ' + x1 + ',' + y1 +
                   ' L ' + (x2 - r) + ',' + y1 +
                   ' Q ' + x2 + ',' + y1 + ' ' + x2 + ',' + (y1 - r) +
                   ' L ' + x2 + ',' + y2;
          } else if (direction === 'fork-down') {
            // ä»å·¦è¾¹å¼€å§‹ï¼Œå‘å³èµ°ï¼Œç„¶åå‘ä¸‹
            return 'M ' + x1 + ',' + y1 +
                   ' L ' + (x2 - r) + ',' + y1 +
                   ' Q ' + x2 + ',' + y1 + ' ' + x2 + ',' + (y1 + r) +
                   ' L ' + x2 + ',' + y2;
          } else if (direction === 'merge-up') {
            // ä»å³è¾¹å¼€å§‹å‘ä¸Šï¼Œç„¶åå‘å·¦åˆå¹¶
            return 'M ' + x1 + ',' + y1 +
                   ' L ' + x1 + ',' + (y2 + r) +
                   ' Q ' + x1 + ',' + y2 + ' ' + (x1 - r) + ',' + y2 +
                   ' L ' + x2 + ',' + y2;
          }
          return '';
        }

        // è¿½è¸ªæ´»è·ƒåˆ†æ”¯çš„èµ·æ­¢è¡Œ
        var branchRanges = {};
        careerData.forEach(function(item, i) {
          var b = item.branch;
          if (!branchRanges[b]) branchRanges[b] = { start: i, end: i };
          branchRanges[b].end = i;
        });

        // ç»˜åˆ¶ä¸»çº¿ (master ä»æœ€åº•éƒ¨å»¶ä¼¸åˆ°é¡¶éƒ¨ï¼Œç¡®ä¿å®Œæ•´è¦†ç›–)
        var masterBottomY = rowY(careerData.length - 1); // æœ€åä¸€è¡Œä¸­å¿ƒ
        var masterTopY = rowY(0); // ç¬¬ä¸€è¡Œä¸­å¿ƒ
        paths.push('<line x1="15" y1="' + masterBottomY + '" x2="15" y2="' + masterTopY + '" class="gline gline-master"/>');

        // ç»˜åˆ¶ GADS åˆ†æ”¯ (ä» master checkout åˆ° merge å› master)
        if (branchRanges.gads) {
          var gadsStart = branchRanges.gads.end; // checkout row
          var gadsEnd = branchRanges.gads.start; // merge row
          // æ‰¾åˆ° master merge gads çš„ä½ç½®
          var gadsMergeRow = -1;
          careerData.forEach(function(item, i) {
            if (item.branch === 'master' && item.merges && item.merges.indexOf('gads') >= 0) {
              gadsMergeRow = i;
            }
          });
          // ä» master åˆ†å‡º
          var checkoutRow = gadsStart;
          for (var i = 0; i < careerData.length; i++) {
            if (careerData[i].branch === 'master' && careerData[i].newBranch === 'gads') {
              checkoutRow = i;
              break;
            }
          }
          var y1 = rowY(checkoutRow);
          var y4 = gadsMergeRow >= 0 ? rowY(gadsMergeRow) : rowY(gadsEnd);
          // å¸¦åœ†è§’çš„åˆ†æ”¯ï¼šä» master åˆ†å‡ºå‘ä¸Šï¼Œæœ€ååˆå¹¶å› master
          var path = 'M 15,' + y1 +
                     ' L ' + (35 - R) + ',' + y1 +
                     ' Q 35,' + y1 + ' 35,' + (y1 - R) +
                     ' L 35,' + (y4 + R) +
                     ' Q 35,' + y4 + ' ' + (35 - R) + ',' + y4 +
                     ' L 15,' + y4;
          paths.push('<path d="' + path + '" class="gline gline-gads" fill="none"/>');
        }

        // ç»˜åˆ¶ GWS åˆ†æ”¯ (ä» master checkout å‘ä¸Šå»¶ä¼¸)
        if (branchRanges.gws) {
          var gwsCheckoutRow = -1;
          for (var i = 0; i < careerData.length; i++) {
            if (careerData[i].branch === 'master' && careerData[i].newBranch === 'gws') {
              gwsCheckoutRow = i;
              break;
            }
          }
          if (gwsCheckoutRow >= 0) {
            var gwsStartY = rowY(gwsCheckoutRow);
            var gwsHeadRow = branchRanges.gws.start;
            var gwsEndY = rowY(gwsHeadRow);
            // å¸¦åœ†è§’ï¼šä» master å‘å³åˆ†å‡ºï¼Œç„¶åå‘ä¸Š
            var path = 'M 15,' + gwsStartY +
                       ' L ' + (35 - R) + ',' + gwsStartY +
                       ' Q 35,' + gwsStartY + ' 35,' + (gwsStartY - R) +
                       ' L 35,' + gwsEndY;
            paths.push('<path d="' + path + '" class="gline gline-gws" fill="none"/>');
          }
        }

        // ç»˜åˆ¶ project åˆ†æ”¯
        function drawProjectBranch(name, parentBranch, parentX) {
          if (!branchRanges[name]) return;
          var cfg = branchConfig[name];
          var startRow = branchRanges[name].end;
          var endRow = branchRanges[name].start;
          var x = cfg.x;
          // æ‰¾ fork ç‚¹
          var forkRow = startRow;
          careerData.forEach(function(item, i) {
            if (item.forks && item.forks.indexOf(name) >= 0) {
              forkRow = i;
            }
          });
          // æ‰¾ merge ç‚¹
          var mergeRow = endRow;
          careerData.forEach(function(item, i) {
            if (item.merges && item.merges.indexOf(name) >= 0) {
              mergeRow = i;
            }
          });
          var isOngoing = careerData[endRow].type === 'ongoing';
          var y1 = rowY(forkRow);
          var y4 = rowY(mergeRow);
          var yTop = rowY(0);
          // è·å–åˆ†æ”¯é¢œè‰²ç±»
          var colorClass = cfg.color === 'research' ? 'gline-research' : 'gline-project';

          if (isOngoing) {
            // å¸¦åœ†è§’ï¼šä»çˆ¶åˆ†æ”¯åˆ†å‡ºå‘å³ï¼Œç„¶åå‘ä¸Šå»¶ä¼¸åˆ°é¡¶éƒ¨
            var path = 'M ' + parentX + ',' + y1 +
                       ' L ' + (x - R) + ',' + y1 +
                       ' Q ' + x + ',' + y1 + ' ' + x + ',' + (y1 - R) +
                       ' L ' + x + ',' + yTop;
            paths.push('<path d="' + path + '" class="gline ' + colorClass + '" fill="none"/>');
          } else {
            // å¸¦åœ†è§’ï¼šåˆ†å‡ºå‘ä¸Šï¼Œæœ€ååˆå¹¶å›çˆ¶åˆ†æ”¯
            var path = 'M ' + parentX + ',' + y1 +
                       ' L ' + (x - R) + ',' + y1 +
                       ' Q ' + x + ',' + y1 + ' ' + x + ',' + (y1 - R) +
                       ' L ' + x + ',' + (y4 + R) +
                       ' Q ' + x + ',' + y4 + ' ' + (x - R) + ',' + y4 +
                       ' L ' + parentX + ',' + y4;
            paths.push('<path d="' + path + '" class="gline ' + colorClass + '" fill="none"/>');
          }
        }

        drawProjectBranch('ds', 'gads', 35);
        drawProjectBranch('qe', 'gws', 35);
        drawProjectBranch('webagent', 'gws', 35);
        drawProjectBranch('chatbi', 'gws', 35);
        drawProjectBranch('bda', 'gws', 35);
        drawProjectBranch('research', 'gws', 35);

        // ç»˜åˆ¶èŠ‚ç‚¹
        careerData.forEach(function(item, i) {
          var cfg = branchConfig[item.branch];
          if (!cfg) return;
          var x = cfg.x;
          var y = rowY(i);
          var r = (item.type === 'project' || item.type === 'ongoing') ? 4 : 5;
          var filled = (item.type === 'merge' || item.type === 'checkout' || item.type === 'init') ? ' filled' : '';
          var colorClass = 'gnode-' + cfg.color;
          if (item.type === 'merge' && item.tagType === 'merge') colorClass = 'gnode-merge';
          nodes.push('<circle cx="' + x + '" cy="' + y + '" r="' + r + '" class="gnode ' + colorClass + filled + '"/>');
        });

        svg.innerHTML = paths.join('\n') + '\n' + nodes.join('\n');
      }

      renderTable();
      // SVG å°†åœ¨ Career panel æ˜¾ç¤ºæ—¶æ¸²æŸ“
    })();
  </script>
</body>
</html>
